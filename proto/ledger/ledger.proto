syntax = "proto3";

package ledger;

option go_package = "github.com/marwan562/fintech-ecosystem/proto/ledger";

import "google/protobuf/timestamp.proto";
import "google/api/annotations.proto";

service LedgerService {
  rpc RecordTransaction(RecordTransactionRequest) returns (RecordTransactionResponse) {
    option (google.api.http) = {
      post: "/v1/ledger/transactions"
      body: "*"
    };
  }
  rpc GetAccount(GetAccountRequest) returns (GetAccountResponse) {
    option (google.api.http) = {
      get: "/v1/ledger/accounts/{account_id}"
    };
  }
}

message RecordTransactionRequest {
  string account_id = 1;
  int64 amount = 2; // In cents
  string currency = 3;
  string description = 4;
  string reference_id = 5; // e.g. PaymentIntent ID
  string zone_id = 6;
  string mode = 7;
}

message RecordTransactionResponse {
  string transaction_id = 1;
  string status = 2;
}

message GetAccountRequest {
  string account_id = 1;
}

message GetAccountResponse {
  string account_id = 1;
  int64 balance = 2;
  string currency = 3;
  google.protobuf.Timestamp created_at = 4;
}
